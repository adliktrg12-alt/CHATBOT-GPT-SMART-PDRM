<!DOCTYPE html>
<html lang="ms">
<head>
  <!-- Google Analytics (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-04N3GXN6KM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-04N3GXN6KM');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SMART PDRM Kuantan ‚Äì Pusat Akses GPT</title>

  <style>
    :root{
      /* Cyber Crimson + Magenta (NO blue) */
      --bg0:#07010b;
      --bg1:#160013;
      --bg2:#2a001f;
      --ink:#f8fafc;
      --muted:rgba(248,250,252,.72);
      --glass:rgba(255,255,255,.08);
      --glass2:rgba(255,255,255,.12);
      --stroke:rgba(255,255,255,.18);
      --accent:#ff3d81;
      --accent2:#ff9ec4;
      --good:#22c55e;
      --warn:#f59e0b;
      --shadow:0 18px 48px rgba(0,0,0,.45);
      --radius:18px;
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 10% 15%, rgba(255,61,129,.25), transparent 60%),
        radial-gradient(900px 600px at 85% 20%, rgba(255,158,196,.20), transparent 60%),
        radial-gradient(900px 600px at 40% 85%, rgba(255,61,129,.12), transparent 60%),
        linear-gradient(160deg, var(--bg0), var(--bg1) 45%, var(--bg2));
      overflow-x:hidden;
    }

    /* Animated AI grid + particles */
    .ai-layer{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:-1;
    }
    .ai-grid{
      position:absolute; inset:-40%;
      background:
        repeating-linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px, transparent 1px, transparent 46px),
        repeating-linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px, transparent 1px, transparent 46px);
      transform: rotate(12deg);
      filter: drop-shadow(0 0 18px rgba(255,61,129,.10));
      opacity:.25;
      animation: drift 26s linear infinite;
    }
    @keyframes drift{
      from{ transform:translate3d(-2%, -2%, 0) rotate(12deg); }
      to{ transform:translate3d(2%, 2%, 0) rotate(12deg); }
    }

    .ai-orb{
      position:absolute;
      width:680px; height:680px;
      left:-200px; top:-240px;
      background: radial-gradient(circle at 35% 35%, rgba(255,61,129,.55), transparent 60%),
                  radial-gradient(circle at 65% 65%, rgba(255,158,196,.35), transparent 60%);
      filter: blur(8px);
      opacity:.28;
      animation: floaty 10s ease-in-out infinite;
    }
    .ai-orb.orb2{
      width:560px; height:560px;
      right:-200px; left:auto;
      top:160px;
      opacity:.20;
      animation-duration: 12s;
      animation-delay: -2s;
    }
    @keyframes floaty{
      0%,100%{ transform:translate3d(0,0,0) scale(1); }
      50%{ transform:translate3d(0,24px,0) scale(1.03); }
    }

    /* Layout */
    .wrap{ max-width:1100px; margin:0 auto; padding: 22px 16px 56px; }
    header{
      padding: 18px 0 10px;
      text-align:center;
    }

    .brand{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      margin-top:10px;
    }
    .logo{
      width:120px; height:auto;
      border-radius:16px;
      box-shadow: 0 14px 38px rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
    }

    .chipline{
      display:inline-flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.07);
      color: var(--muted);
      font-size: 12px;
      letter-spacing:.6px;
      backdrop-filter: blur(10px);
    }
    .dot{
      width:9px; height:9px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--accent) 70%);
      box-shadow: 0 0 16px rgba(255,61,129,.8);
      animation: pulse 1.6s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); opacity:.9; }
      50%{ transform:scale(1.25); opacity:1; }
    }

    h1{
      margin: 10px 0 6px;
      font-size: 34px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: 14px;
      line-height: 1.6;
      max-width: 820px;
      margin-inline:auto;
    }

    nav{
      margin-top: 16px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:center;
    }
    nav a{
      text-decoration:none;
      color: var(--ink);
      font-size: 13px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      transition: .2s;
    }
    nav a:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); }

    /* Marquee tagline */
    .marquee{
      margin: 20px auto 10px;
      max-width: 980px;
      overflow:hidden;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    .marquee-inner{
      display:flex;
      white-space:nowrap;
      gap:40px;
      padding: 10px 0;
      animation: marquee 18s linear infinite;
      font-size: 12px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(255,255,255,.9);
    }
    @keyframes marquee{
      0%{ transform: translateX(0); }
      100%{ transform: translateX(-50%); }
    }
    .marquee-inner span{ padding-inline: 14px; }

    /* Sections */
    .section{
      margin-top: 18px;
      padding: 18px;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }
    .section h2{
      margin: 0 0 10px;
      font-size: 20px;
      letter-spacing: .4px;
    }
    .section p{
      margin: 10px 0 0;
      color: var(--muted);
      line-height: 1.7;
      font-size: 13.5px;
    }

    /* Info card (Not ChatGPT biasa) */
    .info{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding: 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.16);
      background: linear-gradient(135deg, rgba(255,61,129,.12), rgba(255,255,255,.06));
      margin-top: 14px;
    }
    .badge{
      width:44px; height:44px;
      border-radius: 14px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,61,129,.55) 45%, rgba(255,255,255,0) 70%),
        radial-gradient(circle at 60% 60%, rgba(255,158,196,.45), rgba(255,255,255,0) 70%);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 10px 26px rgba(255,61,129,.18);
      flex:0 0 auto;
    }
    .info b{ color:#fff; }

    /* Controls */
    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin: 12px 0 2px;
    }
    .search{
      flex: 1 1 240px;
      display:flex;
      gap:10px;
      align-items:center;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .search input{
      width:100%;
      border:0;
      outline:0;
      background:transparent;
      color:var(--ink);
      font-size: 13px;
    }
    .mini{
      font-size: 12px;
      color: var(--muted);
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      user-select:none;
    }

    /* Grid cards */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 14px;
      margin-top: 14px;
    }
    .card{
      padding: 16px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.05);
      backdrop-filter: blur(10px);
      position:relative;
      overflow:hidden;
      transition: .25s;
    }
    .card::before{
      content:"";
      position:absolute; inset:-40%;
      background: radial-gradient(circle at 20% 20%, rgba(255,61,129,.20), transparent 55%),
                  radial-gradient(circle at 80% 50%, rgba(255,158,196,.14), transparent 55%);
      transform: rotate(8deg);
      opacity:.7;
      pointer-events:none;
    }
    .card:hover{
      transform: translateY(-3px);
      background: rgba(255,255,255,.075);
      box-shadow: 0 18px 46px rgba(0,0,0,.55);
    }
    .card h3{
      margin:0 0 6px;
      font-size: 15px;
      letter-spacing:.2px;
      position:relative;
      z-index:1;
    }
    .card p{
      margin:0 0 12px;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.6;
      position:relative;
      z-index:1;
      min-height: 38px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.15);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.85);
      font-size: 11px;
      margin-bottom: 10px;
      position:relative;
      z-index:1;
    }
    .pill i{
      width:8px; height:8px; border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 12px rgba(255,61,129,.65);
      display:inline-block;
    }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      position:relative;
      z-index:1;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: #fff;
      text-decoration:none;
      font-size: 12px;
      font-weight: 700;
      letter-spacing:.2px;
      transition:.2s;
      cursor:pointer;
    }
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), #ff62a6);
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 12px 28px rgba(255,61,129,.25);
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.12); }
    .btn.primary:hover{ opacity:.92; }
    .btn.ghost{ background: rgba(0,0,0,.18); }
    .btn small{ opacity:.85; font-weight:700; }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(0,0,0,.6);
      z-index: 50;
    }
    .modal.show{ display:flex; }
    .modal-box{
      width:min(720px, 96vw);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(20,0,16,.90);
      backdrop-filter: blur(12px);
      box-shadow: 0 22px 60px rgba(0,0,0,.7);
      overflow:hidden;
    }
    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.12);
    }
    .modal-title{
      font-weight:800;
      letter-spacing:.3px;
    }
    .x{
      border:0; outline:0;
      cursor:pointer;
      color:#fff;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
      width:36px; height:36px;
      border-radius: 12px;
    }
    .modal-body{
      padding: 16px;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.75;
    }
    .modal-body code{
      display:block;
      white-space:nowrap;
      overflow:auto;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.85);
      margin-top: 10px;
    }

    /* Social buttons */
    .social{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 10px;
    }

    footer{
      margin-top: 16px;
      text-align:center;
      color: rgba(255,255,255,.70);
      font-size: 11.5px;
      line-height: 1.7;
      padding: 22px 10px 10px;
    }

    /* Small screens */
    @media (max-width:520px){
      h1{ font-size: 28px; }
      .sub{ font-size: 13px; }
    }
  </style>
</head>

<body>
  <div class="ai-layer" aria-hidden="true">
    <div class="ai-grid"></div>
    <div class="ai-orb"></div>
    <div class="ai-orb orb2"></div>
  </div>

  <div class="wrap">
    <header>
      <div class="brand">
        <img class="logo" src="https://arleta.site/interactivelink/1247/logo-group-whatsapp.png" alt="Logo SMART PDRM Kuantan" />
        <div class="chipline"><span class="dot"></span> AI ‚Ä¢ Digitalisasi ‚Ä¢ Pendidikan & Pencegahan Jenayah</div>
      </div>

      <h1>SMART PDRM KUANTAN</h1>
      <p class="sub">
        Pusat akses rasmi modul GPT pendidikan & pencegahan jenayah di bawah SMART PDRM ‚Äì
        sesuai untuk ceramah, taklimat, sekolah, komuniti dan operasi PDRM.
      </p>

      <nav>
        <a href="#about" data-track="nav_objektif">Objektif</a>
        <a href="#gpt" data-track="nav_senarai_gpt">Senarai GPT</a>
        <a href="#guide" data-track="nav_cara_guna">Cara Guna</a>
        <a href="#social" data-track="nav_media_sosial">Media Sosial</a>
      </nav>

      <div class="marquee" aria-label="Tagline bergerak">
        <div class="marquee-inner">
          <span>SMART PDRM ‚Äì CEGAH JENAYAH BERSAMA DIGITAL</span>
          <span>SEDAR SEBELUM TERKENA ‚Äì PENDIDIKAN UNTUK SEMUA</span>
          <span>PDRM KUANTAN ‚Äì KOMUNITI LEBIH SELAMAT</span>
          <span>SMART PDRM ‚Äì CEGAH JENAYAH BERSAMA DIGITAL</span>
          <span>SEDAR SEBELUM TERKENA ‚Äì PENDIDIKAN UNTUK SEMUA</span>
          <span>PDRM KUANTAN ‚Äì KOMUNITI LEBIH SELAMAT</span>
        </div>
      </div>
    </header>

    <section class="section" id="about">
      <h2>Objektif Landing Page</h2>
      <p>
        Halaman ini menggabungkan semua modul GPT SMART PDRM Kuantan supaya mudah dicapai oleh
        anggota PDRM, agensi kerajaan, sekolah dan komuniti. Ia menjadi pusat rujukan pantas untuk
        pendidikan, pencegahan jenayah, keselamatan awam serta sokongan kempen & hebahan.
      </p>

      <div class="info">
        <div class="badge" aria-hidden="true"></div>
        <div>
          <b>Makluman:</b> Chatbot di halaman ini <b>bukan ‚ÄúChatGPT biasa‚Äù</b>.
          Ia telah <b>diprogramkan & disusun khusus</b> untuk kesesuaian pengguna di <b>Malaysia</b>
          (bahasa, konteks tempatan, istilah operasi, pendidikan pencegahan jenayah) bagi memudahkan rujukan
          cepat kepada anggota, agensi, sekolah dan komuniti.
        </div>
      </div>
    </section>

    <section class="section" id="gpt">
      <h2>Senarai GPT SMART PDRM Kuantan</h2>

      <div class="controls">
        <div class="search" title="Carian modul GPT">
          üîé <input id="search" type="search" placeholder="Taip untuk cari‚Ä¶ contoh: scam / dadah / trafik / integriti" />
        </div>
        <div class="mini"><span id="count">0</span> modul dipaparkan</div>
      </div>

      <div class="grid" id="grid"></div>
    </section>

    <section class="section" id="guide">
      <h2>Cara Guna (Ringkas)</h2>
      <p>
        1) Pilih modul GPT yang berkaitan. 2) Tekan <b>Akses GPT</b>. 3) Tulis soalan/isu yang hendak diketahui.
        4) Gunakan untuk ceramah, taklimat, kelas sekolah, komuniti dan rujukan pantas. <br>
        <b>Tip:</b> Gunakan butang <b>Share WhatsApp</b> untuk kongsi pautan modul kepada orang lain.
      </p>
    </section>

    <section class="section" id="social">
      <h2>Media Sosial Rasmi IPD Kuantan</h2>
      <p>Ikuti platform rasmi untuk hebahan operasi, berita & video pendidikan:</p>
      <div class="social">
        <a class="btn primary" target="_blank" rel="noopener"
           href="https://www.tiktok.com/@polis.kuantan?_r=1&_t=ZS-927xAbvpffg"
           data-social="tiktok">TikTok Rasmi ‚Üó</a>
        <a class="btn primary" target="_blank" rel="noopener"
           href="https://www.facebook.com/share/1FGuTVLRd2/"
           data-social="facebook">Facebook Rasmi ‚Üó</a>
      </div>
    </section>

    <footer>
      ¬© <span id="year"></span> SMART PDRM Kuantan ‚Äì Platform Digital Pendidikan & Kesedaran Jenayah.<br>
      <span style="opacity:.8">Nota: Gunakan maklumat secara beretika dan patuhi SOP/garis panduan jabatan.</span>
    </footer>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-box">
      <div class="modal-head">
        <div class="modal-title" id="mTitle">Maklumat</div>
        <button class="x" id="mClose" aria-label="Tutup">‚úï</button>
      </div>
      <div class="modal-body" id="mBody"></div>
    </div>
  </div>

  <script>
    // ===== TRACKING HELPER (Kaedah 1) =====
    function trackEvent(name, params={}){
      try{
        if(typeof gtag === "function"){
          gtag('event', name, Object.assign({
            transport_type: 'beacon'
          }, params));
        }
      }catch(e){}
    }

    function trackGPT(action, item){
      // action: access | copy | whatsapp
      const ev = `gpt_${item.key}_${action}`;
      trackEvent(ev, {
        gpt_key: item.key,
        gpt_name: item.name,
        gpt_tag: item.tag,
        destination: item.url
      });
    }

    function trackNav(name){
      trackEvent(name, {section: name.replace("nav_","")});
    }

    function trackSocial(which, url){
      trackEvent(`social_${which}_click`, {destination: url});
    }

    // DATA: Semua link GPT
    const GPTS = [
      {
        key:"sedarscam",
        name:"SEDARScam ‚Äì Elak Jadi Mangsa",
        tag:"Anti-Scam",
        desc:"Pengesanan scam, contoh kes & langkah keselamatan.",
        url:"https://chatgpt.com/g/g-68025ae29f2881918d1f81ae3b764a73-sedarscam-elak-jadi-mangsa"
      },
      {
        key:"sedarbuli",
        name:"SEDARBuli ‚Äì Pendidikan & Pencegahan",
        tag:"Anti-Buli",
        desc:"Buli fizikal, mental & siber untuk sekolah & komuniti.",
        url:"https://chatgpt.com/g/g-68026762843481919b77a01cfabdd36a-sedarbuli-chatbot-pendidikan-dan-pencegahan-buli"
      },
      {
        key:"sedardadah",
        name:"SEDARDadah ‚Äì Bahaya Penyalahgunaan",
        tag:"Anti-Dadah",
        desc:"Maklumat dadah, kesan & undang-undang.",
        url:"https://chatgpt.com/g/g-6806e2c944608191bc525cee0e4b4c75-sedardadah-bahaya-pencegahan-dadah"
      },
      {
        key:"sedarrempit",
        name:"SEDARRempit ‚Äì Bahaya Lumba Haram",
        tag:"Trafik/JPJKK",
        desc:"Kesedaran risiko lumba haram, keselamatan jalan raya & komuniti.",
        url:"https://chatgpt.com/g/g-6807280a730881918eb7088f90f21f42-sedarrempit-bahaya-lumba-haram"
      },
      {
        key:"sedarseksual",
        name:"SEDAR ‚Äì Jenayah Seksual",
        tag:"Keselamatan",
        desc:"Pendidikan perlindungan & kesedaran jenayah seksual.",
        url:"https://chatgpt.com/g/g-680b43d3286c8191a600c54fe2ce2d93-sedar-jenayah-seksual"
      },
      {
        key:"amanita",
        name:"AMANITA ‚Äì Sahabat Digital Wanita",
        tag:"Amanita",
        desc:"Keselamatan wanita, keluarga & bantuan rasmi.",
        url:"https://chatgpt.com/g/g-68158ade5c7c8191b390127e4b06b1f7-gpt-amanita-sahabat-digital-pdrm-untuk-wanita"
      },
      {
        key:"bencana",
        name:"GPT Bencana ‚Äì Panduan & Rujukan",
        tag:"Bencana",
        desc:"Tindakan bencana, kesiapsiagaan & keselamatan awam.",
        url:"https://chatgpt.com/g/g-680b4ec5119c8191ac75094e8dad480d-gpt-bencana-panduan-dan-rujukan-umum"
      },
      {
        key:"integriti",
        name:"SEDAR ‚Äì Integriti PDRM",
        tag:"Integriti",
        desc:"Panduan integriti, etika, tatatertib & rasuah.",
        url:"https://chatgpt.com/g/g-691d292ea3a08191a98d9e13319f0b26-chatbot-sedar-integriti-pdrm"
      },
      {
        key:"trafik",
        name:"SEDAR Trafik ‚Äì Keselamatan Jalan Raya",
        tag:"Trafik",
        desc:"Pendidikan trafik & keselamatan pengguna jalan raya.",
        url:"https://chatgpt.com/g/g-690d4b889c48819189fd243c28c57f30-sedartrafik-keselamatan-jalanraya-awam"
      },
      {
        key:"smartpdrm",
        name:"SMART PDRM ‚Äì Platform Induk",
        tag:"Induk",
        desc:"Pautan induk SMART PDRM ‚Äì himpunan modul GPT.",
        url:"https://chatgpt.com/g/g-68039f7c96f48191b77a873c806dfd94-smart-pdrm-platform-digital-ai-cegah-jenayah"
      },
      {
        key:"ipdkuantan",
        name:"GPT IPD Kuantan",
        tag:"Info IPD",
        desc:"Maklumat rasmi IPD Kuantan untuk masyarakat.",
        url:"https://chatgpt.com/g/g-685eb19015a08191a74481246abc16f2-gpt-ipd-kuantan"
      }
    ];

    const grid = document.getElementById("grid");
    const countEl = document.getElementById("count");
    const searchEl = document.getElementById("search");

    // Modal
    const modal = document.getElementById("modal");
    const mTitle = document.getElementById("mTitle");
    const mBody = document.getElementById("mBody");
    const mClose = document.getElementById("mClose");

    function openModal(title, html){
      mTitle.textContent = title;
      mBody.innerHTML = html;
      modal.classList.add("show");
      modal.setAttribute("aria-hidden","false");
    }
    function closeModal(){
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden","true");
    }
    mClose.addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=>{ if(e.target===modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });

    function copyText(text){
      navigator.clipboard.writeText(text).then(()=> {
        openModal("Berjaya disalin ‚úÖ", `Pautan telah disalin ke clipboard:<code>${escapeHtml(text)}</code>`);
      }).catch(()=> {
        openModal("Tidak berjaya ‚ùå", `Telefon tidak membenarkan auto-copy. Sila salin manual:<code>${escapeHtml(text)}</code>`);
      });
    }

    function openWhatsAppShare(title, url){
      const msg = `${title}\n${url}\n\nSMART PDRM Kuantan ‚Äì Cegah Jenayah Bersama Digital.`;
      const wa = `https://wa.me/?text=${encodeURIComponent(msg)}`;
      window.open(wa, "_blank");
    }

    function escapeHtml(str){
      return String(str).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
    }

    function render(list){
      grid.innerHTML = "";
      list.forEach(item=>{
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="pill"><i></i> ${escapeHtml(item.tag)}</div>
          <h3>${escapeHtml(item.name)}</h3>
          <p>${escapeHtml(item.desc)}</p>
          <div class="actions">
            <a class="btn primary" target="_blank" rel="noopener"
               href="${item.url}"
               data-access="${item.key}">
               Akses GPT ‚Üó
            </a>
            <button class="btn ghost" type="button" data-copy="${item.key}">Copy Link</button>
            <button class="btn ghost" type="button" data-wa="${item.key}">Share WhatsApp</button>
            <button class="btn ghost" type="button" data-info="1">Info</button>
          </div>
        `;
        grid.appendChild(card);
      });

      // bind Akses GPT
      grid.querySelectorAll("a[data-access]").forEach(a=>{
        a.addEventListener("click", ()=>{
          const key = a.getAttribute("data-access");
          const item = GPTS.find(x => x.key === key);
          if(item) trackGPT("access", item);
        });
      });

      // bind Copy Link
      grid.querySelectorAll("button[data-copy]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const key = btn.getAttribute("data-copy");
          const item = GPTS.find(x => x.key === key);
          if(item){
            trackGPT("copy", item);
            copyText(item.url);
          }
        });
      });

      // bind Share WhatsApp
      grid.querySelectorAll("button[data-wa]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const key = btn.getAttribute("data-wa");
          const item = GPTS.find(x => x.key === key);
          if(item){
            trackGPT("whatsapp", item);
            openWhatsAppShare(item.name, item.url);
          }
        });
      });

      // Info
      grid.querySelectorAll("button[data-info]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          openModal("Tip Penggunaan GPT", `
            <b>Cadangan soalan:</b>
            <ul>
              <li>‚ÄúBagi contoh kes dan modus operandi‚Ä¶‚Äù</li>
              <li>‚ÄúApa langkah pencegahan yang sesuai untuk sekolah/komuniti?‚Äù</li>
              <li>‚ÄúSenaraikan tips ringkas untuk poster/slide/ceramah.‚Äù</li>
            </ul>
            <b>Nota:</b> Gunakan maklumat secara beretika & patuhi SOP/garis panduan jabatan.
          `);
        });
      });

      countEl.textContent = list.length;
    }

    // Search
    function filter(){
      const q = (searchEl.value || "").trim().toLowerCase();
      if(!q){ render(GPTS); return; }
      const out = GPTS.filter(x =>
        x.name.toLowerCase().includes(q) ||
        x.tag.toLowerCase().includes(q) ||
        x.desc.toLowerCase().includes(q)
      );
      render(out);
    }
    searchEl.addEventListener("input", filter);

    // Footer year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Track nav clicks
    document.querySelectorAll('nav a[data-track]').forEach(a=>{
      a.addEventListener("click", ()=> trackNav(a.getAttribute("data-track")));
    });

    // Track social clicks
    document.querySelectorAll('[data-social]').forEach(a=>{
      a.addEventListener("click", ()=>{
        trackSocial(a.getAttribute("data-social"), a.getAttribute("href"));
      });
    });

    // Initial render
    render(GPTS);
  </script>
</body>
</html>
